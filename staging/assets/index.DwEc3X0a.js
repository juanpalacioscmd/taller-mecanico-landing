!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e={taller:{telefono:"+56 9 8765 4321",email:"contacto@tallermecanicoautofix.cl",whatsapp:"+56987654321",horarios:{lunes_viernes:"08:00 - 18:00",sabado:"08:00 - 13:00",domingo:"Cerrado"}},servicios:[{id:1,titulo:"Mantención Preventiva",descripcion:"Revisión completa del vehículo según kilometraje",icono:"wrench",precio:"Desde $25.000"},{id:2,titulo:"Cambio de Aceite",descripcion:"Cambio de aceite y filtros con productos de calidad",icono:"oil-can",precio:"Desde $15.000"},{id:3,titulo:"Frenos",descripcion:"Revisión y reparación del sistema de frenos",icono:"brake-disc",precio:"Desde $35.000"},{id:4,titulo:"Suspensión",descripcion:"Diagnóstico y reparación de sistema de suspensión",icono:"shock-absorber",precio:"Desde $45.000"},{id:5,titulo:"Diagnóstico Computarizado",descripcion:"Escaneo completo con equipos de última generación",icono:"computer",precio:"Desde $20.000"},{id:6,titulo:"Alineación y Balanceo",descripcion:"Alineación de dirección y balanceo de ruedas",icono:"wheel",precio:"Desde $18.000"}]},t=document.getElementById("nav-menu"),s=document.getElementById("nav-toggle"),o=document.getElementById("nav-close"),n=document.querySelectorAll(".nav__link"),r=document.getElementById("header");class i{constructor(){this.init()}init(){this.setupMenuToggle(),this.setupMenuEventListeners(),this.setupActiveLinks(),this.setupSmoothScroll(),this.setupHeaderScroll()}setupMenuToggle(){s&&(s.addEventListener("click",()=>{this.toggleMenu(!0)}),s.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleMenu(!0))})),o&&(o.addEventListener("click",()=>{this.toggleMenu(!1)}),o.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleMenu(!1))}))}toggleMenu(e){if(e){t.classList.add("show-menu"),document.body.style.overflow="hidden";const e=t.querySelector(".nav__link");e&&e.focus()}else t.classList.remove("show-menu"),document.body.style.overflow="auto",s&&s.focus()}setupMenuEventListeners(){n.forEach(e=>{e.addEventListener("click",()=>{this.toggleMenu(!1)})}),document.addEventListener("click",e=>{t.contains(e.target)||s.contains(e.target)||this.toggleMenu(!1)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.contains("show-menu")&&this.toggleMenu(!1)})}setupActiveLinks(){const e=document.querySelectorAll("section[id]"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.getAttribute("id");this.setActiveLink(t)}})},{root:null,rootMargin:"-50% 0px -50% 0px",threshold:0});e.forEach(e=>t.observe(e))}setActiveLink(e){n.forEach(t=>{t.classList.remove("active"),t.getAttribute("href")===`#${e}`&&t.classList.add("active")})}setupSmoothScroll(){n.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const s=e.getAttribute("href"),o=document.querySelector(s);if(o){const e=r.offsetHeight,t=o.offsetTop-e;window.scrollTo({top:t,behavior:"smooth"})}})})}setupHeaderScroll(){let e=window.scrollY;window.addEventListener("scroll",()=>{const t=window.scrollY;t>100?(r.style.background="rgba(255, 255, 255, 0.98)",r.style.boxShadow="0 2px 20px rgba(0, 0, 0, 0.1)"):(r.style.background="rgba(255, 255, 255, 0.95)",r.style.boxShadow="none"),r.style.transform=t>e&&t>200?"translateY(-100%)":"translateY(0)",e=t})}}class a{constructor(){this.init()}init(){this.setupScrollIndicator(),this.setupHeroAnimations()}setupScrollIndicator(){const e=document.querySelector(".hero");if(e){const t=document.createElement("div");t.className="scroll-indicator",t.innerHTML='\n        <div class="scroll-indicator__text">Desliza para ver más</div>\n        <div class="scroll-indicator__arrow">↓</div>\n      ',e.appendChild(t),window.addEventListener("scroll",()=>{window.scrollY>100?t.style.opacity="0":t.style.opacity="1"})}}setupHeroAnimations(){document.querySelectorAll(".hero__title, .hero__description, .hero__actions, .hero__image").forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(30px)",setTimeout(()=>{e.style.transition="all 0.6s ease-out",e.style.opacity="1",e.style.transform="translateY(0)"},200*t)})}}class c{constructor(){this.init()}init(){this.setupImageGallery(),this.setupAnimations()}setupImageGallery(){document.querySelectorAll(".about__img").forEach(e=>{e.style.backgroundColor="var(--gray-200)",e.style.minHeight="200px",e.src&&!e.src.includes("placeholder")||this.createImagePlaceholder(e),e.addEventListener("load",()=>{e.style.backgroundColor="transparent"}),e.addEventListener("error",()=>{this.createImagePlaceholder(e)})})}createImagePlaceholder(e){const t=document.createElement("div");t.style.cssText="\n      width: 100%;\n      height: 200px;\n      background: linear-gradient(135deg, var(--gray-200) 0%, var(--gray-300) 100%);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: var(--radius-xl);\n      color: var(--gray-500);\n      font-size: var(--font-size-4xl);\n    ";const s=["🔧","⚙️","🚗"],o=s[Math.floor(Math.random()*s.length)];t.textContent=o,e.style.display="none",e.parentNode.appendChild(t)}setupAnimations(){const e=document.querySelectorAll(".about__text, .about__images"),t=new IntersectionObserver(e=>{e.forEach((e,t)=>{e.isIntersecting&&setTimeout(()=>{e.target.classList.contains("about__text")?e.target.classList.add("animate-fade-in-left"):e.target.classList.add("animate-fade-in-right")},200*t)})},{root:null,rootMargin:"0px 0px -100px 0px",threshold:.1});e.forEach(e=>t.observe(e))}}class l{constructor(){this.servicesGrid=document.getElementById("services-grid"),this.init()}init(){this.renderServices(),this.setupServiceAnimations()}renderServices(){if(!this.servicesGrid)return;const t=e.servicios.map(e=>`\n      <div class="service-card" data-service-id="${e.id}">\n        <div class="service-card__icon">${this.getServiceIcon(e.icono)}</div>\n        <h3 class="service-card__title">${e.titulo}</h3>\n        <p class="service-card__description">${e.descripcion}</p>\n        <div class="service-card__price">${e.precio}</div>\n      </div>\n    `).join("");this.servicesGrid.innerHTML=t}getServiceIcon(e){return{wrench:"🔧","oil-can":"🛢️","brake-disc":"🛞","shock-absorber":"⚙️",computer:"💻",wheel:"🎯"}[e]||"🔧"}setupServiceAnimations(){const e=document.querySelectorAll(".service-card"),t=new IntersectionObserver(e=>{e.forEach((e,t)=>{e.isIntersecting&&setTimeout(()=>{e.target.classList.add("animate-fade-in-up")},100*t)})},{root:null,rootMargin:"0px 0px -100px 0px",threshold:.1});e.forEach(e=>t.observe(e))}}class d{constructor(){this.init()}init(){this.updateContactInfo(),this.setupDynamicSchedule(),this.setupContactLinks()}updateContactInfo(){const{taller:t}=e;document.querySelectorAll('a[href^="tel:"]').forEach(e=>{e.href=`tel:${t.telefono}`,e.textContent.includes("+56")&&(e.textContent=t.telefono)});document.querySelectorAll('a[href^="mailto:"]').forEach(e=>{e.href=`mailto:${t.email}`,e.textContent.includes("@")&&(e.textContent=t.email)});const s=document.querySelector(".whatsapp__btn");if(s){const e=t.whatsapp,o=encodeURIComponent("Hola, me interesa conocer sus servicios de taller mecánico");s.href=`https://wa.me/${e}?text=${o}`}}setupDynamicSchedule(){const t=document.querySelectorAll(".schedule__item"),{horarios:s}=e.taller;t.forEach(e=>{const t=e.querySelector(".schedule__day"),o=e.querySelector(".schedule__time");if(t&&o){const e=t.textContent.toLowerCase();e.includes("lun")||e.includes("vie")?o.textContent=s.lunes_viernes:e.includes("sáb")?o.textContent=s.sabado:e.includes("dom")&&(o.textContent=s.domingo)}}),this.addCurrentStatusIndicator()}addCurrentStatusIndicator(){const e=new Date,t=e.getDay(),s=60*e.getHours()+e.getMinutes();let o=!1,n="";if(t>=1&&t<=5){o=s>=480&&s<1080,n=o?"Abierto ahora":"Cerrado"}else if(6===t){o=s>=480&&s<780,n=o?"Abierto ahora":"Cerrado"}else n="Cerrado";const r=document.querySelector(".contact__schedule");if(r){const e=document.createElement("div");e.className="schedule__status "+(o?"schedule__status--open":"schedule__status--closed"),e.innerHTML=`\n        <span class="status__indicator"></span>\n        <span class="status__text">${n}</span>\n      `,r.appendChild(e)}}setupContactLinks(){document.querySelectorAll(".contact__link, .nav__cta, .whatsapp__btn").forEach(e=>{e.addEventListener("click",t=>{const s=this.getContactMethod(e);console.log(`Contact method used: ${s}`),e.style.transform="scale(0.95)",setTimeout(()=>{e.style.transform=""},150)})})}getContactMethod(e){return e.href.startsWith("tel:")?"phone":e.href.startsWith("mailto:")?"email":e.href.includes("wa.me")?"whatsapp":"unknown"}}class u{constructor(){this.form=document.getElementById("contact-form"),this.submitBtn=document.getElementById("submit-btn"),this.formMessage=document.getElementById("form-message"),this.init()}init(){this.form&&(this.setupFormValidation(),this.setupFormSubmission())}setupFormValidation(){this.form.querySelectorAll(".form__input, .form__textarea").forEach(e=>{e.addEventListener("blur",()=>this.validateField(e)),e.addEventListener("input",()=>this.clearFieldError(e))})}validateField(e){const t=e.value.trim(),s=e.name,o=document.getElementById(`${s}-error`);let n=!0,r="";switch(s){case"nombre":t?t.length<2&&(r="El nombre debe tener al menos 2 caracteres",n=!1):(r="El nombre es requerido",n=!1);break;case"email":t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(r="Ingresa un email válido",n=!1):(r="El email es requerido",n=!1);break;case"telefono":t?/^(\+56|56)?[0-9]{8,9}$/.test(t.replace(/\s/g,""))||(r="Ingresa un teléfono válido (ej: +56912345678)",n=!1):(r="El teléfono es requerido",n=!1);break;case"mensaje":t?t.length<10&&(r="El mensaje debe tener al menos 10 caracteres",n=!1):(r="El mensaje es requerido",n=!1)}return o&&(o.textContent=r,e.style.borderColor=n?"":"var(--error)"),n}clearFieldError(e){const t=document.getElementById(`${e.name}-error`);t&&(t.textContent="",e.style.borderColor="")}validateForm(){const e=this.form.querySelectorAll("[required]");let t=!0;return e.forEach(e=>{this.validateField(e)||(t=!1)}),t}setupFormSubmission(){this.form.addEventListener("submit",async e=>{if(e.preventDefault(),this.validateForm()){this.setLoadingState(!0);try{const e=new FormData(this.form);if(!(await this.submitToFormspree(e)).ok)throw new Error("Error en el envío");this.showMessage("¡Mensaje enviado exitosamente! Te contactaremos pronto.","success"),this.form.reset()}catch(t){console.error("Error submitting form:",t),this.showMessage("Error al enviar el mensaje. Por favor, intenta nuevamente o llámanos directamente.","error")}finally{this.setLoadingState(!1)}}else this.showMessage("Por favor, corrige los errores en el formulario","error")})}async submitToFormspree(e){return new Promise(e=>{setTimeout(()=>{e({ok:!0})},1500)})}setLoadingState(e){e?(this.submitBtn.classList.add("loading"),this.submitBtn.disabled=!0):(this.submitBtn.classList.remove("loading"),this.submitBtn.disabled=!1)}showMessage(e,t){this.formMessage.textContent=e,this.formMessage.className=`form__message form__message--${t}`,this.formMessage.style.display="block","success"===t&&setTimeout(()=>{this.formMessage.style.display="none"},5e3)}}class m{constructor(){this.init()}init(){this.setupIntersectionObserver()}setupIntersectionObserver(){const e=document.querySelectorAll(".about__content, .contact__content"),t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("animate-fade-in-up")})},{root:null,rootMargin:"0px 0px -100px 0px",threshold:.1});e.forEach(e=>t.observe(e))}}class h{constructor(){this.init()}init(){this.setupLazyLoading(),this.preloadCriticalImages()}setupLazyLoading(){const e=document.querySelectorAll("img[data-src]");if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const s=e.target;s.src=s.dataset.src,s.classList.remove("lazy"),t.unobserve(s)}})});e.forEach(e=>t.observe(e))}else e.forEach(e=>{e.src=e.dataset.src})}preloadCriticalImages(){["/src/assets/images/hero-mechanic.jpg","/src/assets/icons/logo.svg"].forEach(e=>{const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e,document.head.appendChild(t)})}}document.addEventListener("DOMContentLoaded",()=>{new i,new a,new c,new l,new d,new u,new m,new h,document.body.classList.add("loaded");const e=document.getElementById("staging-banner");e&&window.location.pathname.includes("/staging/")?e.style.display="block":e&&(e.style.display="none"),console.log("Taller Mecánico AutoFix - Website loaded successfully! 🔧")}),window.addEventListener("error",e=>{console.error("JavaScript Error:",e.error)}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})});
